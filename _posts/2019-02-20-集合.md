---
layout: post
title: Javaä¸­çš„é›†åˆä½“ç³»
subtitle: è¿™ä¸ªä¹Ÿæ˜¯ä¸ªåŸºç¡€é¸­ğŸ˜ğŸ˜ğŸ˜
date: 2019-02-22
author: åä»”
header-img: img/post-bg-debug.png
catalog: true
tags:
    - Java
    - åŸºç¡€çŸ¥è¯†
---

## é›†åˆä½“ç³»

- **Collection**(interface)
  - **Set**(interface)
    - **HashSet**(class): extends *AbstractSet*(abstract class),implements *Set*(interface)
    	- **LinkedHashSet**(class):extends ***HashSet***(class),implements *Set*(interface)
    - **TreeSet**(class): extends *AbstractSet*(abstract class),implements *NavigableSet*(interface)
  - **List**(interface)
    - **ArrayList**(class):extends *AbstractList*(abstract class),implements *List*(interface)
    - **Vector**(class):extends *AbstractList*(abstract class),implements *List*(interface)
    - **LinkedList**(class):extends *AbstractSequentialList*(abstract class),implements *List*(interface),Deque(Queueçš„å­æ¥å£)
  - **Queue**(interface):é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨,FIFOçš„æ•°æ®ç»“æ„
    - **PriorityQueue**(class):extends *AbstractQueue*
- **Map**(interface)
  - **HashMap**(class):extends *AbstractMap*(abstract class),implements *Map*(interface)
  	- **LinkedHashMap**(class):extends ***HashMap***(class),implements *Map*(interface)
  - **HashTable**(class):extends *Dictionary*(abstract class),implements *Map*(interface)
  - **TreeMap**(class):extends *AbstractMap*(abstract class),implements *NavigableMap*(interface)

![é›†åˆä½“ç³»](http://blog-ipic.yananhuazai.cn/Fr2ukTsPAGkj8WCGO1QSSfAXvzn3)



## Collectionæ¥å£

- ### Setæ¥å£ï¼Œç‰¹ç‚¹ï¼šæ— åºï¼Œå”¯ä¸€

```java
public class TreeSetExample {
    public static void main(String[] args) {
        User user1 = new User("zhangsan",18);
        User user2 = new User("lisi",18);
        User user3 = new User("lisi",20);
        User user4 = new User("lisi",20);
        User user5 = new User("wangwu",26);
        User user6 = new User("zhaoliu",15);

        TreeSet<User> treeSet = new TreeSet<>();
        treeSet.add(user1);
        treeSet.add(user2);
        treeSet.add(user3);
        treeSet.add(user4);
        treeSet.add(user5);
        treeSet.add(user6);

        for (User user : treeSet) {
            System.out.println(user);
        }
    }
}
class User {
    private String name;
    private Integer age;

    public User(String name, Integer age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "User{" +
                "name='" + name + '\'' +
                ", age=" + age +
                '}';
    }
}
```

è¿è¡Œç»“æœ:

```java
Exception in thread "main" java.lang.ClassCastException: cn.huazai.main.collection_interface.User cannot be cast to java.lang.Comparable
	at java.util.TreeMap.compare(TreeMap.java:1294)
	at java.util.TreeMap.put(TreeMap.java:538)
	at java.util.TreeSet.add(TreeSet.java:255)
	at cn.huazai.main.collection_interface.TreeSetExample.main(TreeSetExample.java:21)
```

ä¿®æ”¹å:

**è§£å†³æ–¹å¼1**(Userç±»å®ç°Comparable):

```java
public class TreeSetExample {
    public static void main(String[] args) {
        User user1 = new User("zhangsan",18);
        User user2 = new User("lisi",18);
        User user3 = new User("lisi",20);
        User user4 = new User("lisi",20);
        User user5 = new User("wangwu",26);
        User user6 = new User("zhaoliu",15);
        User user7 = new User("zhangsan",14);

        TreeSet<User> treeSet = new TreeSet<>();
        treeSet.add(user1);
        treeSet.add(user2);
        treeSet.add(user3);
        treeSet.add(user4);
        treeSet.add(user5);
        treeSet.add(user6);
        treeSet.add(user7);

        for (User user : treeSet) {
            System.out.println(user);
        }
    }
}
class User implements Comparable<User> {
    private String name;
    private Integer age;

    //çœç•¥getter setter ä»¥åŠé‡å†™toString

    @Override
    public int compareTo(User u) {
        //return -1; //è¡¨ç¤ºæ”¾åœ¨çº¢é»‘æ ‘å·¦è¾¹ å€’åºè¾“å‡º LIFO(åè¿›å…ˆå‡º)
        //return 1; //è¡¨ç¤ºæ”¾åœ¨çº¢é»‘æ ‘å³è¾¹ é¡ºåºè¾“å‡º FIFO(å…ˆè¿›å…ˆå‡º)
        //return 0; //è¡¨ç¤ºå…ƒç´ ç›¸åŒ,å¿½ç•¥,ä¸å­˜å…¥

        //å§“åçš„é•¿åº¦,å¦‚æœå§“åé•¿åº¦å°çš„å°±æ”¾åœ¨å·¦å­æ ‘ï¼Œå¦åˆ™æ”¾åœ¨å³å­æ ‘
        int num = this.name.length() - u.name.length();
        //å§“åçš„é•¿åº¦ç›¸åŒï¼Œä¸ä»£è¡¨å†…å®¹ç›¸åŒ,å¦‚æœæŒ‰å­—å…¸é¡ºåºæ­¤ String å¯¹è±¡ä½äºå‚æ•°å­—ç¬¦ä¸²ä¹‹å‰ï¼Œåˆ™æ¯”è¾ƒç»“æœä¸ºä¸€ä¸ªè´Ÿæ•´æ•°ã€‚
        //å¦‚æœæŒ‰å­—å…¸é¡ºåºæ­¤ String å¯¹è±¡ä½äºå‚æ•°å­—ç¬¦ä¸²ä¹‹åï¼Œåˆ™æ¯”è¾ƒç»“æœä¸ºä¸€ä¸ªæ­£æ•´æ•°ã€‚
        //å¦‚æœè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œåˆ™ç»“æœä¸º 0
        int num1 = num == 0 ? this.name.compareTo(u.name) : num;
        //å§“åçš„é•¿åº¦å’Œå†…å®¹ç›¸åŒï¼Œä¸ä»£è¡¨å¹´é¾„ç›¸åŒï¼Œæ‰€ä»¥è¿˜è¦åˆ¤æ–­å¹´é¾„
        int num2 = num1 == 0 ? this.age - u.age : num1;
        System.out.println("this.name:"+this.name+",u.name:"+u.name+",num2:"+num2);
        return num2;
    }
}
```

æ‰§è¡Œç»“æœ:

```java
this.name:zhangsan,u.name:zhangsan,num2:0
this.name:lisi,u.name:zhangsan,num2:-4
this.name:lisi,u.name:zhangsan,num2:-4
this.name:lisi,u.name:lisi,num2:2
this.name:lisi,u.name:lisi,num2:0
this.name:wangwu,u.name:lisi,num2:2
this.name:wangwu,u.name:zhangsan,num2:-2
this.name:zhaoliu,u.name:lisi,num2:3
this.name:zhaoliu,u.name:zhangsan,num2:-1
this.name:zhaoliu,u.name:wangwu,num2:1
this.name:zhangsan,u.name:lisi,num2:4
this.name:zhangsan,u.name:zhaoliu,num2:1
this.name:zhangsan,u.name:zhangsan,num2:-4
User{name='lisi', age=18}
User{name='lisi', age=20}
User{name='wangwu', age=26}
User{name='zhaoliu', age=15}
User{name='zhangsan', age=14}
User{name='zhangsan', age=18}
```



**è§£å†³æ–¹å¼2**(TreeSetä¼ å…¥æ¥å£Comparatorçš„å®ç°çš„æœ‰å‚æ„é€ ):

```java
public class TreeSetExample {
    public static void main(String[] args) {
        User user1 = new User("zhangsan",18);
        User user2 = new User("lisi",18);
        User user3 = new User("lisi",20);
        User user4 = new User("lisi",20);
        User user5 = new User("wangwu",26);
        User user6 = new User("zhaoliu",15);
        User user7 = new User("zhangsan",14);

        TreeSet<User> treeSet = new TreeSet<>((o1,o2)->{
            //æ¯”åå­—å­—æ•°
            int num = o1.getName().length()-o2.getName().length();
            //å­—æ•°ä¸€æ ·æ¯”åå­—(Stringè‡ªå·±çš„å¯¹æ¯”æ–¹å¼)
            int num1 = num == 0 ? o1.getName().compareTo(o2.getName()) : num;
            //åå­—ä¸€æ ·æ¯”å¹´é¾„
            int num2 = num1 == 0 ? o1.getAge() - o2.getAge() : num1;
            //å¦‚æœä¾ç„¶ä¸º0è¡¨ç¤ºä¸¤ä¸ªç›¸åŒçš„ç”¨æˆ·,å°†ä¼šè¿”å›0,è¢«å¿½ç•¥è€Œä¸åŠ å…¥é›†åˆä¸­
            return num2;
        });
        treeSet.add(user1);
        treeSet.add(user2);
        treeSet.add(user3);
        treeSet.add(user4);
        treeSet.add(user5);
        treeSet.add(user6);
        treeSet.add(user7);

        for (User user : treeSet) {
            System.out.println(user);
        }
    }
}

ç»“æœä¸æ–¹å¼1ç›¸åŒ,å¹¶æ²¡æœ‰å®è´¨æ”¹å˜,åªæ˜¯å®šä¹‰æ¯”è¾ƒå™¨çš„ä½ç½®ä¸ä¸€æ ·äº†è€Œå·²
```

**Setæ¥å£çš„å„ä¸ªå®ç°ç±»å¯¹æ¯”:**

- HashSet
  - åº•å±‚æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨ï¼ˆæ— åºï¼Œå”¯ä¸€ï¼‰
- LinkedHashSet
  - åº•å±‚æ•°æ®ç»“æ„æ˜¯é“¾è¡¨å’Œå“ˆå¸Œè¡¨(FIFOæ’å…¥æœ‰åº,å”¯ä¸€)
- TreeSet
  - åº•å±‚æ•°æ®ç»“æ„æ˜¯çº¢é»‘æ ‘ï¼ˆå”¯ä¸€ï¼Œæœ‰åºï¼‰
  - ä¸èƒ½å­˜null*1

> HashSetï¼šå“ˆå¸Œè¡¨ä¾èµ–hashCode()å’Œequals()æ¥ä¿è¯å…ƒç´ çš„å”¯ä¸€æ€§

> LinkedHashSetï¼šç”±é“¾è¡¨ä¿è¯å…ƒç´ çš„æœ‰åºæ€§ï¼Œç”±å“ˆå¸Œè¡¨ä¿è¯å…ƒç´ çš„å”¯ä¸€æ€§

> TreeSetï¼šå…ƒç´ æ’åºé€šè¿‡å®ç°Comparableæ¥å£æˆ–ä½¿ç”¨TreeSet(Comparator)æœ‰å‚æ„é€ æ’åº



*1ï¼š

```java
public class SetTest {
    public static void main(String[] args) {
        HashSet<String> hashSet = new HashSet<>();
        hashSet.add(null);
        System.out.println(hashSet);
        
        LinkedHashSet<String> linkedHashSet = new LinkedHashSet<>();
        linkedHashSet.add(null);
        System.out.println(linkedHashSet);
        
        TreeSet<String> treeSet = new TreeSet<>();
        treeSet.add(null);
        System.out.println(treeSet);
    }
}

æ‰§è¡Œç»“æœ:
[null]
[null]
Exception in thread "main" java.lang.NullPointerException
	at java.util.TreeMap.compare(TreeMap.java:1294)
	at java.util.TreeMap.put(TreeMap.java:538)
	at java.util.TreeSet.add(TreeSet.java:255)
	at cn.huazai.main.collection_interface.SetTest.main(SetTest.java:22)
```






- ### Listæ¥å£ï¼Œç‰¹ç‚¹ï¼šæœ‰åºï¼Œå¯é‡å¤

Listæ¥å£çš„å„ä¸ªå®ç°ç±»å¯¹æ¯”:

- ArrayList
  - ä¼˜ç‚¹ï¼šåº•å±‚æ•°æ®ç»“æ„ä¸ºæ•°ç»„ï¼ŒæŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢
  - ç¼ºç‚¹ï¼šçº¿ç¨‹ä¸å®‰å…¨ï¼ˆæ•ˆç‡é«˜ï¼‰
- Vector
  - ä¼˜ç‚¹ï¼šåº•å±‚æ•°æ®ç»“æ„ä¸ºæ•°ç»„ï¼ŒæŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢
  - ç¼ºç‚¹ï¼šæ•ˆç‡ä½ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
- LinkedList
  - ä¼˜ç‚¹ï¼šåº•å±‚æ•°æ®ç»“æ„ä¸ºé“¾è¡¨ï¼ŒæŸ¥è¯¢æ…¢ï¼Œå¢åˆ å¿«
  - ç¼ºç‚¹ï¼šçº¿ç¨‹ä¸å®‰å…¨ï¼ˆæ•ˆç‡é«˜ï¼‰



#### å°å®éªŒï¼š

**æµ‹è¯•æ˜¯å¦å¯ä»¥å­˜nullå€¼**

```java
public class ListExample {
    public static void main(String[] args) {
        ArrayList<String> arrayList = new ArrayList<>();
        arrayList.add(null);
        System.out.println(arrayList);

        LinkedList<String> linkedList = new LinkedList<>();
        linkedList.add(null);
        System.out.println(linkedList);

        Vector<String> vector = new Vector<>();
        vector.add(null);
        System.out.println(vector);
    }
}

æ‰§è¡Œç»“æœï¼š
[null]
[null]
[null]

æ€»ç»“ï¼šListæ¥å£çš„å®ç°ç±»ArrayListã€LinkedListã€Vectorå‡å¯ä»¥å­˜nullå€¼ã€‚
```



**æµ‹è¯•çº¿ç¨‹æ˜¯å¦å®‰å…¨**

```java
//ArrayList:
public class ListExample {
    public static void main(String[] args) throws InterruptedException {
        ArrayList<Integer> arrayList = new ArrayList<>(10000);
        for (int i = 0; i < 10; i++) {
            new Thread(()->{
                for (int j = 0; j < 100; j++) {
                    arrayList.add(j);
                }
            }).start();
        }
        Thread.sleep(1000);
        System.out.println(arrayList.size()); //æµ‹è¯•å¤šæ¬¡ï¼Œæ‰“å°çš„ç»“æœæ€»æ˜¯å°‘äº1000ï¼Œçº¿ç¨‹ä¸å®‰å…¨
    }
}

//LinkedList:
public class ListExample {
    public static void main(String[] args) throws InterruptedException {
        LinkedList<Integer> linkedList = new LinkedList<>();
        for (int i = 0; i < 10; i++) {
            new Thread(()->{
                for (int j = 0; j < 100; j++) {
                    linkedList.add(j);
                }
            }).start();
        }
        Thread.sleep(1000);
        System.out.println(linkedList.size()); //æµ‹è¯•å¤šæ¬¡ï¼Œæ‰“å°çš„ç»“æœå§‹ç»ˆå°‘äº1000ï¼Œçº¿ç¨‹ä¸å®‰å…¨
    }
}

//Vector:
public class ListExample {
    public static void main(String[] args) throws InterruptedException {
        Vector<Integer> vector = new Vector<>();
        for (int i = 0; i < 10; i++) {
            new Thread(()->{
                for (int j = 0; j < 100; j++) {
                    vector.add(j);
                }
            }).start();
        }
        Thread.sleep(1000);
        System.out.println(vector.size()); //æµ‹è¯•å¤šæ¬¡ï¼Œæ‰“å°çš„ç»“æœå§‹ç»ˆæ˜¯1000ï¼Œçº¿ç¨‹å®‰å…¨
    }
}

//...ä½¿çº¿ç¨‹ä¸å®‰å…¨çš„é›†åˆç»“æœä¹Ÿä¸º1000ï¼ŒåŠ å…¥synchronizedä»£ç å—,ä½¿ç”¨æ­¤ç±»çš„classä½œä¸ºé”
public class ListExample {
    public static void main(String[] args) throws InterruptedException {
        LinkedList<Integer> linkedList = new LinkedList<>();
        for (int i = 0; i < 10; i++) {
            new Thread(()->{
                for (int j = 0; j < 100; j++) {
                    synchronized (ListExample.class) {
                        linkedList.add(j);
                    }
                }
            }).start();
        }
        Thread.sleep(1000);
        System.out.println(linkedList.size()); //1000
    }
}
```





- ### Mapæ¥å£

Mapæ¥å£ä¸­å„ä¸ªå®ç°ç±»çš„å¯¹æ¯”ï¼š

- HashMap
  - æ— åºï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼ˆæ•ˆç‡é«˜ï¼‰ï¼Œå…è®¸å­˜nullå€¼
  - åˆå§‹å®¹é‡ï¼š16ï¼ŒåŠ è½½å› å­ï¼š0.75ï¼Œæ‰©å®¹å¢é‡ï¼šåŸæœ‰å®¹é‡çš„1å€ï¼ˆå®¹é‡å§‹ç»ˆä¸º2çš„æŒ‡æ•°ï¼‰

- HashTable
  - æœ‰åºï¼Œçº¿ç¨‹å®‰å…¨ï¼ˆæ•ˆç‡ä½ï¼‰ï¼Œä¸å…è®¸å­˜nullå€¼
  - åˆå§‹å®¹é‡ï¼š11ï¼ŒåŠ è½½å› å­ï¼š0.75ï¼Œæ‰©å®¹å¢é‡ï¼š2*åŸæ•°ç»„é•¿åº¦+1

- TreeMap
  - ä¸å…è®¸å­˜nullå€¼
  - keyå¿…é¡»å¯æ’åºï¼ˆå¼•ç”¨ç±»å‹å®ç°Comparableæ¥å£ï¼Œæˆ–å®šä¹‰æ—¶ä½¿ç”¨å‚æ•°ä¸ºComparatoræ¥å£çš„æ„é€ åˆå§‹åŒ–ï¼‰
  ![TreeMapçš„æœ‰å‚æ„é€ ](http://blog-ipic.yananhuazai.cn/FoHa0KhaUtCEOlTIbMTVsg4tKn38)

- ConcurrentHashMap
  - çº¿ç¨‹å®‰å…¨
  - ä¸å…è®¸keyä¸ºnullå€¼
  ```java
  //ä½¿ç”¨HashMapæµ‹è¯•çº¿ç¨‹æ˜¯å¦å®‰å…¨
  public class TestTreeMap {
      public static void main(String[] args) throws InterruptedException {
          HashMap<String, String> hashMap = new HashMap<>();
          for (int i = 0; i < 100; i++) {
              new Thread(() -> {
                  for (int j = 0; j < 100; j++) {
                      hashMap.put(UUID.randomUUID().toString(), "è€é“æ²¡æ¯›ç—…");
                  }
              }).start();
          }
          Thread.sleep(1000);
          System.out.println(hashMap.size()); //ç»è¿‡å¤šæ¬¡æµ‹è¯•ï¼Œç»“æœå‡ä¸è¶³10000ï¼Œçº¿ç¨‹ä¸å®‰å…¨
      }
  }
  
  //æ¢æˆConcurrentHashMap
  public class TestTreeMap {
      public static void main(String[] args) throws InterruptedException {
          ConcurrentHashMap<String, String> concurrentHashMap = new ConcurrentHashMap<>();
          for (int i = 0; i < 100; i++) {
              new Thread(() -> {
                  for (int j = 0; j < 100; j++) {
                      concurrentHashMap.put(UUID.randomUUID().toString(), "è€é“æ²¡æ¯›ç—…");
                  }
              }).start();
          }
          Thread.sleep(1000);
          System.out.println(concurrentHashMap.size()); //ç»è¿‡å¤šæ¬¡æµ‹è¯•ï¼Œç»“æœæ€»æ˜¯10000
      }
  }
  ```

  




- ### Queueæ¥å£ï¼Œç‰¹ç‚¹ï¼šæ— åºï¼Œå¯é‡å¤


  - æ²¡æœ‰å®ç°çš„é˜»å¡æ¥å£çš„LinkedList
  - **å®ç°äº†java.util.Queueæ¥å£å’Œjava.util.AbstractQueueæ¥å£**ï¼Œå†…ç½®çš„ä¸é˜»å¡é˜Ÿåˆ—ï¼š PriorityQueue å’Œ ConcurrentLinkedQueue

```
add        å¢åŠ ä¸€ä¸ªå…ƒç´¢                     å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªIIIegaISlabEepeplianå¼‚å¸¸
remove   ç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´     å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªNoSuchElementExceptionå¼‚å¸¸
element  è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´              å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªNoSuchElementExceptionå¼‚å¸¸
offer       æ·»åŠ ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›true       å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™è¿”å›false
poll         ç§»é™¤å¹¶è¿”é—®é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´     å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å›null
peek       è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´              å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å›null
put         æ·»åŠ ä¸€ä¸ªå…ƒç´                       å¦‚æœé˜Ÿåˆ—æ»¡ï¼Œåˆ™é˜»å¡
take        ç§»é™¤å¹¶è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´      å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™é˜»å¡
```



**å¯¹æ¯”ï¼š**

- PriorityQueue
  - PriorityQueue ç±»å®è´¨ä¸Šç»´æŠ¤äº†ä¸€ä¸ªæœ‰åºåˆ—è¡¨ã€‚åŠ å…¥åˆ° Queue ä¸­çš„å…ƒç´ æ ¹æ®å®ƒä»¬çš„å¤©ç„¶æ’åºï¼ˆé€šè¿‡å…¶ java.util.Comparable å®ç°ï¼‰æˆ–è€…æ ¹æ®ä¼ é€’ç»™æ„é€ å‡½æ•°çš„ java.util.Comparator å®ç°æ¥å®šä½ã€‚
- ConcurrentLinkedQueue
  - ConcurrentLinkedQueue æ˜¯åŸºäºé“¾æ¥èŠ‚ç‚¹çš„ã€çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ã€‚å¹¶å‘è®¿é—®ä¸éœ€è¦åŒæ­¥ã€‚å› ä¸ºå®ƒåœ¨é˜Ÿåˆ—çš„å°¾éƒ¨æ·»åŠ å…ƒç´ å¹¶ä»å¤´éƒ¨åˆ é™¤å®ƒä»¬ï¼Œæ‰€ä»¥åªè¦ä¸éœ€è¦çŸ¥é“é˜Ÿåˆ—çš„å¤§å°ï¼ŒConcurrentLinkedQueue å¯¹å…¬å…±é›†åˆçš„å…±äº«è®¿é—®å°±å¯ä»¥å·¥ä½œå¾—å¾ˆå¥½ã€‚æ”¶é›†å…³äºé˜Ÿåˆ—å¤§å°çš„ä¿¡æ¯ä¼šå¾ˆæ…¢ï¼Œéœ€è¦éå†é˜Ÿåˆ—ã€‚



**LinkedBlockingQueue**çš„å®¹é‡æ˜¯æ²¡æœ‰ä¸Šé™çš„ï¼ˆè¯´çš„ä¸å‡†ç¡®ï¼Œåœ¨ä¸æŒ‡å®šæ—¶å®¹é‡ä¸ºInteger.MAX_VALUEï¼Œä¸è¦ç„¶çš„è¯åœ¨putæ—¶æ€ä¹ˆä¼šå—é˜»å‘¢ï¼‰ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‡å®šå…¶æœ€å¤§å®¹é‡ï¼Œå®ƒæ˜¯åŸºäºé“¾è¡¨çš„é˜Ÿåˆ—ï¼Œæ­¤é˜Ÿåˆ—æŒ‰ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰æ’åºå…ƒç´ ã€‚


**ArrayBlockingQueue**åœ¨æ„é€ æ—¶éœ€è¦æŒ‡å®šå®¹é‡ï¼Œ å¹¶å¯ä»¥é€‰æ‹©æ˜¯å¦éœ€è¦å…¬å¹³æ€§ï¼Œå¦‚æœå…¬å¹³å‚æ•°è¢«è®¾ç½®trueï¼Œç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ä¼šä¼˜å…ˆå¾—åˆ°å¤„ç†ï¼ˆå…¶å®å°±æ˜¯é€šè¿‡å°†ReentrantLockè®¾ç½®ä¸ºtrueæ¥ è¾¾åˆ°è¿™ç§å…¬å¹³æ€§çš„ï¼šå³ç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ä¼šå…ˆæ“ä½œï¼‰ã€‚é€šå¸¸ï¼Œå…¬å¹³æ€§ä¼šä½¿ä½ åœ¨æ€§èƒ½ä¸Šä»˜å‡ºä»£ä»·ï¼Œåªæœ‰åœ¨çš„ç¡®éå¸¸éœ€è¦çš„æ—¶å€™å†ä½¿ç”¨å®ƒã€‚å®ƒæ˜¯åŸºäºæ•°ç»„çš„é˜»å¡å¾ªç¯é˜Ÿ åˆ—ï¼Œæ­¤é˜Ÿåˆ—æŒ‰ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰åŸåˆ™å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚


**PriorityBlockingQueue**æ˜¯ä¸€ä¸ªå¸¦ä¼˜å…ˆçº§çš„ é˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ã€‚å…ƒç´ æŒ‰ä¼˜å…ˆçº§é¡ºåºè¢«ç§»é™¤ï¼Œè¯¥é˜Ÿåˆ—ä¹Ÿæ²¡æœ‰ä¸Šé™ï¼ˆçœ‹äº†ä¸€ä¸‹æºç ï¼ŒPriorityBlockingQueueæ˜¯å¯¹ PriorityQueueçš„å†æ¬¡åŒ…è£…ï¼Œæ˜¯åŸºäºå †æ•°æ®ç»“æ„çš„ï¼Œè€ŒPriorityQueueæ˜¯æ²¡æœ‰å®¹é‡é™åˆ¶çš„ï¼Œä¸ArrayListä¸€æ ·ï¼Œæ‰€ä»¥åœ¨ä¼˜å…ˆé˜»å¡ é˜Ÿåˆ—ä¸Šputæ—¶æ˜¯ä¸ä¼šå—é˜»çš„ã€‚è™½ç„¶æ­¤é˜Ÿåˆ—é€»è¾‘ä¸Šæ˜¯æ— ç•Œçš„ï¼Œä½†æ˜¯ç”±äºèµ„æºè¢«è€—å°½ï¼Œæ‰€ä»¥è¯•å›¾æ‰§è¡Œæ·»åŠ æ“ä½œå¯èƒ½ä¼šå¯¼è‡´ OutOfMemoryErrorï¼‰ï¼Œä½†æ˜¯å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£ä¹ˆå–å…ƒç´ çš„æ“ä½œtakeå°±ä¼šé˜»å¡ï¼Œæ‰€ä»¥å®ƒçš„æ£€ç´¢æ“ä½œtakeæ˜¯å—é˜»çš„ã€‚å¦å¤–ï¼Œå¾€å…¥è¯¥é˜Ÿåˆ—ä¸­çš„å…ƒ ç´ è¦å…·æœ‰æ¯”è¾ƒèƒ½åŠ›ã€‚


**DelayQueue**ï¼ˆåŸºäºPriorityQueueæ¥å®ç°çš„ï¼‰æ˜¯ä¸€ä¸ªå­˜æ”¾Delayed å…ƒç´ çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œåªæœ‰åœ¨å»¶è¿ŸæœŸæ»¡æ—¶æ‰èƒ½ä»ä¸­æå–å…ƒç´ ã€‚è¯¥é˜Ÿåˆ—çš„å¤´éƒ¨æ˜¯å»¶è¿ŸæœŸæ»¡åä¿å­˜æ—¶é—´æœ€é•¿çš„ Delayed å…ƒç´ ã€‚å¦‚æœå»¶è¿Ÿéƒ½è¿˜æ²¡æœ‰æœŸæ»¡ï¼Œåˆ™é˜Ÿåˆ—æ²¡æœ‰å¤´éƒ¨ï¼Œå¹¶ä¸”pollå°†è¿”å›nullã€‚å½“ä¸€ä¸ªå…ƒç´ çš„ getDelay(TimeUnit.NANOSECONDS) æ–¹æ³•è¿”å›ä¸€ä¸ªå°äºæˆ–ç­‰äºé›¶çš„å€¼æ—¶ï¼Œåˆ™å‡ºç°æœŸæ»¡ï¼Œpollå°±ä»¥ç§»é™¤è¿™ä¸ªå…ƒç´ äº†ã€‚æ­¤é˜Ÿåˆ—ä¸å…è®¸ä½¿ç”¨ null å…ƒç´ ã€‚




- #### PriorityQueue
```java
public class QueueExample {
    public static void main(String[] args) {
        PriorityQueue<String> priorityQueue = new PriorityQueue<>();
        priorityQueue.add("ä½ å¥½ä¸–ç•Œ");
        priorityQueue.add("é¸¡å„¿");
        priorityQueue.add("è€é“");
        priorityQueue.add("è€é“");
        //priorityQueue.add(null); //ç©ºæŒ‡é’ˆå¼‚å¸¸
        System.out.println(priorityQueue);

        Object[] objects = priorityQueue.toArray();
        System.out.println(Arrays.toString(objects));
    }
}

//è¾“å‡ºç»“æœï¼š
[ä½ å¥½ä¸–ç•Œ, è€é“, è€é“, é¸¡å„¿]
[ä½ å¥½ä¸–ç•Œ, è€é“, è€é“, é¸¡å„¿]
```

```java
public class QueueTest {
    public static void main(String[] args) {
        Queue<String> priorityQueue = new PriorityQueue<>(Arrays.asList("å¹´å", "123", "456", "hu", "è€é“", "GG"));
        System.out.println(priorityQueue);

        priorityQueue.add("1231");
        priorityQueue.add("123");

//        System.out.println(priorityQueue.remove()); //è¿”å›é˜Ÿåˆ—çš„head,å¹¶ç§»é™¤,è·Ÿpoll()çš„å”¯ä¸€åŒºåˆ«å°±æ˜¯å¦‚æœé˜Ÿåˆ—ä¸ºemptyåˆ™æŠ›å‡ºNoSuchElementException
//        System.out.println(priorityQueue.element()); //è¿”å›é˜Ÿåˆ—çš„head,ä½†ä¸ç§»é™¤,è·Ÿpeek()çš„å”¯ä¸€åŒºåˆ«å°±æ˜¯å¦‚æœé˜Ÿåˆ—ä¸ºemptyåˆ™æŠ›å‡ºNoSuchElementException
//        System.out.println(priorityQueue.poll()); //è¿”å›é˜Ÿåˆ—çš„head,å¹¶ç§»é™¤ä»–,å¦‚æœé˜Ÿåˆ—ä¸ºempty,åˆ™è¿”å›null
//        System.out.println(priorityQueue.peek()); //è¿”å›é˜Ÿåˆ—çš„head,ä½†ä¸ç§»é™¤,å¦‚æœé˜Ÿåˆ—ä¸ºempty,åˆ™è¿”å›null

        System.out.println(priorityQueue);
    }
}

//è¾“å‡ºç»“æœï¼š
[123, hu, 456, å¹´å, è€é“, GG]
[123, 123, 1231, hu, è€é“, GG, 456, å¹´å]


public class QueueTest {
    public static void main(String[] args) {
        Queue<String> priorityQueue = new PriorityQueue<>();
        priorityQueue.add("å¹´å");
        priorityQueue.add("123");
        priorityQueue.add("456");
        priorityQueue.add("hu");
        priorityQueue.add("è€é“");
        priorityQueue.add("GG");
//        Queue<String> priorityQueue = new PriorityQueue<>(Arrays.asList("å¹´å", "123", "456", "hu", "è€é“", "GG"));
        System.out.println(priorityQueue);

        priorityQueue.add("1231");
        priorityQueue.add("123");

//        System.out.println(priorityQueue.remove()); //è¿”å›é˜Ÿåˆ—çš„head,å¹¶ç§»é™¤,è·Ÿpoll()çš„å”¯ä¸€åŒºåˆ«å°±æ˜¯å¦‚æœé˜Ÿåˆ—ä¸ºemptyåˆ™æŠ›å‡ºNoSuchElementException
//        System.out.println(priorityQueue.element()); //è¿”å›é˜Ÿåˆ—çš„head,ä½†ä¸ç§»é™¤,è·Ÿpeek()çš„å”¯ä¸€åŒºåˆ«å°±æ˜¯å¦‚æœé˜Ÿåˆ—ä¸ºemptyåˆ™æŠ›å‡ºNoSuchElementException
//        System.out.println(priorityQueue.poll()); //è¿”å›é˜Ÿåˆ—çš„head,å¹¶ç§»é™¤ä»–,å¦‚æœé˜Ÿåˆ—ä¸ºempty,åˆ™è¿”å›null
//        System.out.println(priorityQueue.peek()); //è¿”å›é˜Ÿåˆ—çš„head,ä½†ä¸ç§»é™¤,å¦‚æœé˜Ÿåˆ—ä¸ºempty,åˆ™è¿”å›null

        System.out.println(priorityQueue);
    }
}

//è¾“å‡ºç»“æœï¼š
[123, hu, 456, å¹´å, è€é“, GG]
[123, 123, 1231, hu, è€é“, GG, 456, å¹´å]
```

```java
public class QueueExample {
    public static void main(String[] args) {
        PriorityQueue<Object> priorityQueue = new PriorityQueue<>();
        //priorityQueue.add(new Object()); //Exception in thread "main" java.lang.ClassCastException: java.lang.Object cannot be cast to java.lang.Comparable
        //priorityQueue.add(null); //ç©ºæŒ‡é’ˆå¼‚å¸¸
        System.out.println(priorityQueue);
    }
}
```



- #### ConcurrentLinkedQueue

  ```java
  public class QueueExample {
      public static void main(String[] args) {
          ArrayBlockingQueue<String> arrayBlockingQueue = new ArrayBlockingQueue<>(5);
          arrayBlockingQueue.add("123");
          arrayBlockingQueue.add("321");
          arrayBlockingQueue.add("321");
          arrayBlockingQueue.add("222");
          arrayBlockingQueue.add("132");
          System.out.println(arrayBlockingQueue);
      }
  }
  
  //è¿è¡Œç»“æœï¼š
  [123, 321, 321, 222, 132]
  ```





> å‚è€ƒèµ„æ–™ï¼š
>
> [Javaé›†åˆä¸­List,Setä»¥åŠMapç­‰é›†åˆä½“ç³»è¯¦è§£](https://blog.csdn.net/zhangqunshuai/article/details/80660974)