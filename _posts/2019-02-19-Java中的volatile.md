---
layout: post
title: Javaä¸­çš„volatile
subtitle: ğŸ™ˆğŸ™ŠğŸ™‰
date: 2019-02-19
author: åä»”
header-img: img/post-bg-debug.png
catalog: false
tags:
    - Java
---

```
volatile :	/'vÉ‘lÉ™tl/
adj. [åŒ–å­¦] æŒ¥å‘æ€§çš„ï¼›ä¸ç¨³å®šçš„ï¼›çˆ†ç‚¸æ€§çš„ï¼›åå¤æ— å¸¸çš„
n. æŒ¥å‘ç‰©ï¼›æœ‰ç¿…çš„åŠ¨ç‰©
n. (Volatile)äººåï¼›(æ„)æ²ƒæ‹‰è’‚è±
```

### volatileä»‹ç»

â€‹	volatileä½œä¸ºjavaä¸­çš„å…³é”®è¯ä¹‹ä¸€ï¼Œç”¨ä»¥å£°æ˜å˜é‡çš„å€¼å¯èƒ½éšæ—¶ä¼šè¢«åˆ«çš„çº¿ç¨‹ä¿®æ”¹ï¼Œä½¿ç”¨volatileä¿®é¥°çš„å˜é‡ä¼šå¼ºåˆ¶å°†ä¿®æ”¹çš„å€¼ç«‹å³å†™å…¥ä¸»å†…å­˜ï¼Œä¸»å†…å­˜ä¸­å€¼çš„æ›´æ–°ä¼šä½¿ç¼“å­˜ä¸­çš„å€¼å¤±æ•ˆ(évolatileå˜é‡ä¸å…·å¤‡è¿™æ ·çš„ç‰¹æ€§ï¼Œévolatileå˜é‡çš„å€¼ä¼šè¢«ç¼“å­˜ï¼Œçº¿ç¨‹Aæ›´æ–°äº†è¿™ä¸ªå€¼ï¼Œçº¿ç¨‹Bè¯»å–è¿™ä¸ªå˜é‡çš„å€¼æ—¶å¯èƒ½è¯»åˆ°çš„å¹¶ä¸æ˜¯çº¿ç¨‹Aæ›´æ–°åçš„å€¼)ã€‚==**volatileä¼šç¦æ­¢æŒ‡ä»¤é‡æ’ã€‚**==**è¢«volatileä¿®é¥°çš„å˜é‡èƒ½å¤Ÿä¿è¯æ¯ä¸ªçº¿ç¨‹èƒ½å¤Ÿè·å–è¯¥å˜é‡çš„æœ€æ–°å€¼ï¼Œä»è€Œé¿å…å‡ºç°æ•°æ®è„è¯»çš„ç°è±¡ã€‚**



### volatileç‰¹æ€§

**volatileå…·æœ‰å¯è§æ€§ã€æœ‰åºæ€§ï¼Œä¸å…·å¤‡åŸå­æ€§ã€‚**

æ³¨æ„ï¼Œvolatileä¸å…·å¤‡åŸå­æ€§ï¼Œè¿™æ˜¯volatileä¸javaä¸­çš„synchronizedã€java.util.concurrent.locks.Lockæœ€å¤§çš„åŠŸèƒ½å·®å¼‚ï¼Œè¿™ä¸€ç‚¹åœ¨é¢è¯•ä¸­ä¹Ÿæ˜¯éå¸¸å®¹æ˜“é—®åˆ°çš„ç‚¹ã€‚



### åŸå­æ€§ï¼Œå¯è§æ€§ï¼Œæœ‰åºæ€§ä»‹ç»

- åŸå­æ€§ï¼šåŸå­æ€§æ˜¯æŒ‡**ä¸€ä¸ªæ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥ï¼Œæœ‰ç€â€œåŒç”Ÿå…±æ­»â€çš„æ„Ÿè§‰**ã€‚åŠæ—¶åœ¨å¤šä¸ªçº¿ç¨‹ä¸€èµ·æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€ä¸ªæ“ä½œä¸€æ—¦å¼€å§‹ï¼Œå°±ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹æ‰€å¹²æ‰°ã€‚
- å¯è§æ€§ï¼šå½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡xæ—¶ï¼Œçº¿ç¨‹1ä¿®æ”¹äº†å˜é‡xçš„å€¼ï¼Œçº¿ç¨‹1ã€çº¿ç¨‹2...çº¿ç¨‹nèƒ½å¤Ÿç«‹å³è¯»å–åˆ°çº¿ç¨‹1ä¿®æ”¹åçš„å€¼ã€‚ï¼ˆå¯è§æ€§æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡åï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚ï¼‰
- æœ‰åºæ€§ï¼šå³ç¨‹åºæ‰§è¡Œæ—¶æŒ‰ç…§ä»£ç ä¹¦å†™çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚åœ¨Javaå†…å­˜æ¨¡å‹ä¸­ï¼Œå…è®¸ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯é‡æ’åºè¿‡ç¨‹ä¸ä¼šå½±å“åˆ°å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œï¼Œå´ä¼šå½±å“åˆ°å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚(æœ¬æ–‡ä¸å¯¹æŒ‡ä»¤é‡æ’ä½œä»‹ç»ï¼Œä½†ä¸ä»£è¡¨å®ƒä¸é‡è¦ï¼Œå®ƒæ˜¯ç†è§£JAVAå¹¶å‘åŸç†æ—¶éå¸¸é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µ)ã€‚



### synchronizedå’Œvolatileçš„ä¸‰æ¡æ€§è´¨åŒºåˆ«

```
synchronized: å…·æœ‰åŸå­æ€§ï¼Œæœ‰åºæ€§å’Œå¯è§æ€§
volatileï¼šå…·æœ‰æœ‰åºæ€§å’Œå¯è§æ€§
```

|  | åŸå­æ€§ | æœ‰åºæ€§ | å¯è§æ€§ |
| :-: | :----: | :----: | :----: |
| synchronized |   âˆš    |   âˆš    |   âˆš    |
| volatile     |   Ã—    |   âˆš    |   âˆš    |




> [ä¸‰å¤§æ€§è´¨æ€»ç»“ï¼šåŸå­æ€§ï¼Œæœ‰åºæ€§ï¼Œå¯è§æ€§](https://www.jianshu.com/p/cf57726e77f2)

> [è®©ä½ å½»åº•ç†è§£volatile](https://www.jianshu.com/p/157279e6efdb)

