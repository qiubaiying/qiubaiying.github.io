I"Ï<h1 id="å‰è¨€">å‰è¨€</h1>

<p>æœ€è¿‘åœ¨åŠå…¬å®¤è§‰å¾—æœ‰ç‚¹åµï¼Œç„¶åå¿½ç„¶æƒ³åšä¸€ä¸ªå™ªéŸ³è®¡æµ‹è¯•ä¸€ä¸‹å™ªéŸ³ï¼Œåœ¨App Storeä¸‹è½½äº†å‡ æ¬¾æµ‹å™ªéŸ³è½¯ä»¶ï¼Œä½¿ç”¨åŸæ¥éƒ½å¤§åŒå°å¼‚ã€‚äºæ˜¯å†³å®šè‡ªå·±å®ç°æµ‹å™ªéŸ³çš„åŸç†ã€‚</p>

<h2 id="åˆ†è´db">åˆ†è´dB</h2>
<p>é¦–å…ˆè¦æµ‹é‡å™ªéŸ³ï¼Œå¿…é¡»çŸ¥é“å™ªéŸ³çš„å¤§å°çš„å‚è€ƒçš„å•ä½ä¸ºåˆ†è´ï¼ˆdBï¼‰ï¼Œåˆ†è´çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SPL = 20lg[p(e)/p(ref)]
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">p(e)</code>ä¸ºå¾…æµ‹çš„æœ‰æ•ˆå£°å‹ï¼Œ<code class="language-plaintext highlighter-rouge">p(ref)</code>ä¸ºå‚è€ƒå£°å‹ï¼Œä¸€èˆ¬å–2*10E-5å¸•ï¼Œè¿™æ˜¯äººè€³èƒ½åˆ†è¾¨çš„æœ€å°å£°å‹ï¼ˆ1KHzï¼‰ã€‚</p>

<p>å°±æ˜¯è¯´å™ªéŸ³æ¯å¢åŠ 20dBï¼Œå£°å‹å¢å¼ºäº†10å€ã€‚</p>

<h2 id="iosæµ‹å™ªéŸ³åŸç†">iOSæµ‹å™ªéŸ³åŸç†</h2>

<p>iOSè®¾å¤‡æµ‹é‡å™ªéŸ³åŸç†éå¸¸ç®€å•ï¼šè°ƒç”¨ç³»ç»Ÿéº¦å…‹é£ï¼Œæ ¹æ®éº¦å…‹é£è¾“å…¥å¼ºåº¦è®¡ç®—è½¬åŒ–ä¸ºå¯¹åº”çš„dBå€¼ã€‚ä½†æ˜¯ï¼Œå®ç°çš„è¿‡ç¨‹å¯æ˜¯å‘æ»¡æ»¡ã€‚</p>

<p>æ‰¾åˆ°äº†ä¸€ç¯‡åšå®¢ä»‹ç»iOSç¡¬ä»¶çš„è°ƒç”¨:<a href="http://www.cnblogs.com/kenshincui/p/4186022.html">iOSå¼€å‘ç³»åˆ—â€“éŸ³é¢‘æ’­æ”¾ã€å½•éŸ³ã€è§†é¢‘æ’­æ”¾ã€æ‹ç…§ã€è§†é¢‘å½•åˆ¶</a></p>

<p>iOSçš„<code class="language-plaintext highlighter-rouge">AVFoundation</code>æ¡†æ¶ä¸­æœ‰ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">AVAudioRecorder</code>ç±»ä¸“é—¨å¤„ç†å½•éŸ³æ“ä½œï¼Œè¯¦è§<a href="https://developer.apple.com/reference/avfoundation/1668872-av_foundation_audio_settings_con">Appleæ–‡æ¡£</a></p>

<p>åœ¨<code class="language-plaintext highlighter-rouge">AVAudioRecorder.h</code>ä¸­æ‰¾åˆ°ä¸‹åˆ—æ–¹æ³•</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- (void)updateMeters; /* call to refresh meter values */ æ›´æ–°éº¦å…‹é£æµ‹é‡å€¼
- (float)peakPowerForChannel:(NSUInteger)channelNumber; /* returns peak power in decibels for a given channel */ è·å–å³°å€¼
- (float)averagePowerForChannel:(NSUInteger)channelNumber; /* returns average power in decibels for a given channel */ è·å–å¹³å±€å€¼
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">- (float)averagePowerForChannel:(NSUInteger)channelNumber;</code>æ–‡æ¡£ä¸­æè¿°ï¼š</p>

<blockquote>
  <p>Return Value</p>
</blockquote>

<blockquote>
  <p>The current average power, in decibels, for the sound being recorded. A return value of 0 dB indicates full scale, or maximum power; a return value of -160 dB indicates minimum power (that is, near silence).</p>
</blockquote>

<blockquote>
  <p>If the signal provided to the audio recorder exceeds Â±full scale, then the return value may exceed 0 (that is, it may enter the positive range).</p>
</blockquote>

<blockquote>
  <p>Discussion</p>
</blockquote>

<blockquote>
  <p>To obtain a current average power value, you must call the updateMeters method before calling this method.</p>
</blockquote>

<p>ä¹Ÿå°±æ˜¯è¯´è·å–çš„éº¦å…‹é£æµ‹é‡å€¼è¿”å›å€¼èŒƒå›´ä¸º <code class="language-plaintext highlighter-rouge">-160dB ~ 0dB</code>,å¹¶ä¸”æ³¨æ„æœ€åé‚£å¥è¯è¿”å›å€¼å¯èƒ½è¶…è¿‡0ã€‚</p>

<h2 id="è½¬åŒ–å…¬å¼">è½¬åŒ–å…¬å¼</h2>

<p>è·å–çš„çš„æµ‹é‡å€¼ä¸º <code class="language-plaintext highlighter-rouge">-160 ~ 0dB</code> ï¼Œå¦‚ä½•è½¬åŒ–ä¸ºæˆ‘ä»¬æ‰€è¦çš„å™ªéŸ³å€¼å‘¢ï¼Ÿåœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šèµ„æ–™éƒ½æ²¡æœ‰ç»“æœï¼Œäºæ˜¯å°±è‡ªå·±æ‘¸ç´¢è½¬åŒ–å…¬å¼ã€‚</p>

<p>åˆšå¼€å§‹æƒ³åˆ°çš„æ˜¯åˆ©ç”¨åˆ†è´è®¡ç®—å…¬å¼<code class="language-plaintext highlighter-rouge">SPL = 20lg[p(e)/p(ref)]</code>è¿›è¡Œè®¡ç®—ï¼Œåæ¥ç›´æ¥æ”¾å¼ƒè¿™ä¸ªæ–¹æ¡ˆï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¯¹æ•°è¿ç®—ï¼Œè·å–åˆ°çš„å€¼éå¸¸ç¨³å®šï¼Œå‡ ä¹ä¸ä¼šæ³¢åŠ¨ï¼Œä¸å…¶ä»–çš„æµ‹å™ªè½¯ä»¶æ‰€å¾—çš„åˆ†è´å€¼å‡ºå…¥å¤ªå¤§ã€‚</p>

<p>ç„¶åå‘ç°æœ‰ä¸ªAppåœ¨éº¦å…‹é£æ²¡æœ‰è¾“å…¥æ—¶æ˜¾ç¤º-55dB</p>

<p><img src="http://ww2.sinaimg.cn/large/7853084cgw1f9u0nu3xv3j205n0a0glq.jpg" alt="" /></p>

<p>äºæ˜¯æ€è·¯å°±æœ‰äº†ã€‚</p>

<p>å…¶ä»–æµ‹å™ªéŸ³è½¯ä»¶çš„é‡ç¨‹å‡ä¸º<code class="language-plaintext highlighter-rouge">0~110dB</code>,è€Œæˆ‘ä»¬è·å–çš„çš„æµ‹é‡å€¼ä¸º <code class="language-plaintext highlighter-rouge">-160 ~ 0dB</code>ï¼Œä¸¤è€…ä¹‹é—´å·®äº†<code class="language-plaintext highlighter-rouge">50dB</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ä»¥éº¦å…‹é£çš„æµ‹é‡å€¼çš„<code class="language-plaintext highlighter-rouge">-160dB+50dB = -110dB</code>ä½œä¸ºèµ·ç‚¹ï¼Œ<code class="language-plaintext highlighter-rouge">0dB</code>ä½œä¸ºMaxå€¼,æ°å¥½é‡ç¨‹ä¸º<code class="language-plaintext highlighter-rouge">0~110dB</code>.</p>

<p>é—®é¢˜çœ‹ä¼¼ç»“æŸï¼Œä½†æ˜¯ç›´æ¥ä»¥<code class="language-plaintext highlighter-rouge">50dB</code>ä½œä¸ºè¡¥å¿æµ‹é‡ç»“æœä¼šåå¤§ã€‚æœ€åé€‰æ‹©äº†åˆ†æ®µè¿›è¡Œå¤„ç†ï¼Œä»£ç å¦‚ä¸‹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
-(void)audioPowerChange{
    
    [self.audioRecorder updateMeters];//æ›´æ–°æµ‹é‡å€¼
    float power = [self.audioRecorder averagePowerForChannel:0];// å‡å€¼
    float powerMax = [self.audioRecorder peakPowerForChannel:0];// å³°å€¼
    NSLog(@"power = %f, powerMax = %f",power, powerMax);
    
    CGFloat progress = (1.0 / 160.0) * (power + 160.0);
    
    // å…³é”®ä»£ç 
    power = power + 160  - 50;
    
    int dB = 0;
    if (power &lt; 0.f) {
        dB = 0;
    } else if (power &lt; 40.f) {
        dB = (int)(power * 0.875);
    } else if (power &lt; 100.f) {
        dB = (int)(power - 15);
    } else if (power &lt; 110.f) {
        dB = (int)(power * 2.5 - 165);
    } else {
        dB = 110;
    }
    
    NSLog(@"progress = %f, dB = %d", progress, dB);
    self.powerLabel.text = [NSString stringWithFormat:@"%ddB", dB];
    [self.audioPowerProgress setProgress:progress];

}

</code></pre></div></div>

<h1 id="æ•ˆæœ">æ•ˆæœ</h1>

<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="http://ww4.sinaimg.cn/large/7853084cgw1f9u1gqgqieg20k00zk7d8.gif" alt="" /></p>

<h1 id="ä¸‹è½½åœ°å€">ä¸‹è½½åœ°å€</h1>

<p>Demoä¸‹è½½åœ°å€ï¼š<a href="https://github.com/qiubaiying/Noise-meter-Demo">Noise-meter-Demo</a></p>
:ET